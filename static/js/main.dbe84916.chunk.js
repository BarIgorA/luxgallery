(this.webpackJsonpluxgallery=this.webpackJsonpluxgallery||[]).push([[10],{10:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(16),s=n(5),i=n(6),c=n(7),l=n(9),u=n(11),d=n(2),h=d.d.model("TabModel",{id:d.d.number,title:d.d.string,icon:d.d.string,component:d.d.string,showSearch:d.d.boolean}).actions((function(e){return{setActive:function(t){t.preventDefault(),Object(d.b)(e,2).setActive(e.id)}}})).views((function(e){return{amIActive:function(){return Object(d.b)(e,2).activeTabIndex===e.id}}})),m=n(15),f=n(4),b=n.n(f),p=n(14),v=n(44),g=n(48),x=n(45),y=n.n(x);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach((function(t){Object(v.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.method,o=void 0===n?"get":n,r=Object(g.a)(t,["method"]);return y()(A({url:e,method:o},r)).then((function(e){return{result:e.data}})).catch((function(e){return{error:e}}))},O=n(46),S=n(47),_=new(function(){function e(t){Object(O.a)(this,e),this.baseUrl=t,this.baseUrl=t}return Object(S.a)(e,[{key:"getAllAlbums",value:function(){return"".concat(this.baseUrl,"/albums")}},{key:"getAlbumById",value:function(e){return"".concat(this.getAllAlbums(),"/").concat(e)}},{key:"getAllPhotos",value:function(){return"".concat(this.baseUrl,"/photos")}},{key:"getPhotosByAlbum",value:function(e){return"".concat(this.getAllPhotos(),"?albumId=").concat(e)}}]),e}())("https://jsonplaceholder.typicode.com"),I=d.d.model("PhotoModel",{albumId:d.d.number,id:d.d.number,thumbnailUrl:d.d.string,title:d.d.string,url:d.d.string,expanded:!1}).actions((function(e){return{showMe:function(){e.expanded=!0},hideMe:function(){e.expanded=!1}}})).views((function(e){return{get isPhotoExpanded(){return e.expanded}}})),j=d.d.model("AlbumModel",{userId:d.d.number,id:d.d.number,title:d.d.string,photos:d.d.array(I),loaded:!1,expanded:!1}).actions((function(e){return{setLoaded:function(){e.loaded=!0},expandMe:function(){e.expanded=!0,e.loaded||this.fetchAlbumsPhotos()},closeMe:function(){e.expanded=!1},fetchAlbumsPhotos:function(){var t=Object(p.a)(b.a.mark((function t(){var n,o;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P(_.getPhotosByAlbum(e.id));case 3:n=t.sent,o=n.result,this.setPhotos(o),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),setPhotos:function(t){var n;t&&Array.isArray(t)&&t.length&&(n=e.photos).push.apply(n,Object(m.a)(t))}}})).views((function(e){return{get albumsPhotos(){return e.loaded?Object(d.b)(e,2).photos.filter((function(t){return t.albumId===e.id})):e.photos.map((function(e){return e}))}}})),E=n(18),T=d.d.model("PhotosModel",{currentAlbum:d.d.number,photos:d.d.array(I),albums:d.d.array(j),allLoaded:d.d.boolean,loading:d.d.boolean,UISwitched:d.d.boolean}).actions((function(e){return{afterCreate:function(){this.fetchAlbums(),this.fetchChunk()},fetchPhotos:function(){var t=Object(p.a)(b.a.mark((function t(){var n,o,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.setLoading(!0),t.next=4,P(_.getPhotosByAlbum(e.currentAlbum));case 4:n=t.sent,o=n.result,this.setPhotos(o),(r=e.albums.find((function(t){return t.id===e.currentAlbum})))&&r.setLoaded(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:return t.prev=14,this.setLoading(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[0,11,14,17]])})));return function(){return t.apply(this,arguments)}}(),fetchAlbums:function(){var e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(_.getAllAlbums());case 3:t=e.sent,n=t.result,this.setAlbums(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),fetchChunk:function(){e.allLoaded||(e.albums.length?this.fetchPhotos():setTimeout(this.fetchChunk,10))},setPhotos:function(t){var n;t&&Array.isArray(t)&&t.length?(n=e.photos).push.apply(n,Object(m.a)(t)):e.allLoaded=!0},setAlbums:function(t){var n;(n=e.albums).push.apply(n,Object(m.a)(t))},tryLoadNext:function(){e.loading||(e.currentAlbum+=1)},setLoading:function(t){e.loading=t},setUISwitched:function(t){e.UISwitched=t},falseUISwitched:function(){Object(d.a)(e).search.falseUISwitched()}}})).views((function(e){return{get inStorePhotos(){return e.UISwitched||Object(d.a)(e).search.UISwitched?e.photos.filter((function(e){return e.albumId<25})):e.photos.map((function(e){return e}))},get inStoreAlbums(){return e.albums.filter((function(e){return e.loaded}))},get AllAlbums(){return e.albums.map((function(e){return e}))},get isAllLoaded(){return e.allLoaded},get searchTerm(){return Object(d.a)(e).search.searchTerm},get lastLoadedAlbum(){return e.currentAlbum},get isLoading(){return e.loading}}})).create({currentAlbum:1,photos:[],albums:[],allLoaded:!1,loading:!0,UISwitched:!1},{search:E.a});Object(d.c)(T,(function(e){"/currentAlbum"===e.path&&(T.setUISwitched(!1),T.falseUISwitched(),T.fetchChunk())}));var L=T,M=d.d.model("AppModel",{activeTabIndex:d.d.number,tabs:d.d.array(h)}).actions((function(e){return{setActive:function(t){e.activeTabIndex=t,0===t&&Object(d.a)(e).photos.setUISwitched(!0)}}})).views((function(e){return{get activeComponent(){return e.tabs[e.activeTabIndex].component},get activeTab(){return e.tabs[e.activeTabIndex]},get photos(){return Object(d.a)(e).photos}}})).create({activeTabIndex:0,tabs:[{id:0,title:"photo",icon:'<svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5-7l-3 3.72L9 13l-3 4h12l-4-5z"></path></svg>',component:"Photos",showSearch:!0},{id:1,title:"albums",icon:'<svg width="24px" height="24px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h5v7l2.5-1.88L18 11V4h2v12z"></path></svg>',component:"Albums",showSearch:!1}]},{photos:L});t.default=Object(a.a)((function(){return r.a.createElement(s.default,null,r.a.createElement(i.default,M.activeTab),r.a.createElement(l.default,null,r.a.createElement(c.default,{tabs:M.tabs}),r.a.createElement(u.default,{photos:M.photos,component:M.activeComponent})))}))},11:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a={provider:n(34).a.Provider,value:new IntersectionObserver((function(e){e.forEach((function(e){var t=e.target.firstChild;if(t)if(e.isIntersecting){t.classList.add("loaded");var n=e.target.getAttribute("data-src")||"";t.setAttribute("src",n)}else t.classList.remove("loaded"),t.setAttribute("src","")}))}),{root:null,rootMargin:"100% 0px 100% 0px",threshold:.1})},s=n(33),i=n.n(s);t.default=Object(o.memo)((function(e){var t=e.photos,s=e.component,c=Object(o.lazy)((function(){return n(56)("./".concat(s))})),l=a.provider,u=a.value;return r.a.createElement("div",{className:i.a.Content},r.a.createElement(l,{value:u},r.a.createElement(o.Suspense,{fallback:"loading..."},r.a.createElement(c,{data:t}))))}))},12:function(e,t,n){e.exports={Header:"styles_Header__2KoFd",search:"styles_search__3On68","lens-icon":"styles_lens-icon__3Yf_0",active:"styles_active__GQths",title:"styles_title__3N7E-"}},18:function(e,t,n){"use strict";var o=n(2),r=o.d.model("SearchModel",{searchTerm:o.d.string,timer:o.d.number,oldTimer:o.d.number,UISwitched:o.d.boolean}).actions((function(e){return{takeLatest:function(t){var n=this;t.persist(),this.setTimer(window.setTimeout((function(){n.setSearchTerm(t.target.value.trim())}),2500)),window.clearTimeout(),e.oldTimer=e.timer},setSearchTerm:function(t){e.UISwitched=!t,e.searchTerm=t},setTimer:function(t){e.timer=t},falseUISwitched:function(){e.UISwitched=!1}}})).create({searchTerm:"",timer:0,oldTimer:0,UISwitched:!0});t.a=r},19:function(e,t,n){e.exports={Tabs:"styles_Tabs__27vOz",active:"styles_active__pKiYD"}},31:function(e,t,n){e.exports={root:"styles_root__3QIwN",Layout:"styles_Layout__2nAOS",logo:"styles_logo__onmWB"}},32:function(e,t,n){e.exports={Main:"styles_Main__2ED-o"}},33:function(e,t,n){e.exports={Content:"styles_Content__3ueQJ"}},34:function(e,t,n){"use strict";var o=n(0),r=n.n(o).a.createContext(null);t.a=r},49:function(e,t,n){e.exports=n(74)},5:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(31),s=n.n(a);t.default=function(e){var t=e.children;return r.a.createElement("div",{className:s.a.Layout},t)}},56:function(e,t,n){var o={"./Albums":[28,9,1],"./Albums/":[28,9,1],"./Albums/Album":[24,9,6],"./Albums/Album/":[24,9,6],"./Albums/Album/index":[24,9,6],"./Albums/Album/index.tsx":[24,9,6],"./Albums/Album/styles.module.scss":[79,7,14],"./Albums/CloseButton":[25,9,7],"./Albums/CloseButton/":[25,9,7],"./Albums/CloseButton/index":[25,9,7],"./Albums/CloseButton/index.tsx":[25,9,7],"./Albums/index":[28,9,1],"./Albums/index.tsx":[28,9,1],"./Albums/styles.module.scss":[78,7,15],"./App":[10,9],"./App/":[10,9],"./App/index":[10,9],"./App/index.tsx":[10,9],"./Content":[11,9],"./Content/":[11,9],"./Content/index":[11,9],"./Content/index.tsx":[11,9],"./Content/styles.module.scss":[33,7],"./Header":[6,9],"./Header/":[6,9],"./Header/index":[6,9],"./Header/index.tsx":[6,9],"./Header/styles.module.scss":[12,7],"./Icon":[8,9],"./Icon/":[8,9],"./Icon/index":[8,9],"./Icon/index.tsx":[8,9],"./Layout":[5,9],"./Layout/":[5,9],"./Layout/index":[5,9],"./Layout/index.tsx":[5,9],"./Layout/styles.module.scss":[31,7],"./Main":[9,9],"./Main/":[9,9],"./Main/index":[9,9],"./Main/index.tsx":[9,9],"./Main/styles.module.scss":[32,7],"./ModalPhoto":[20,9,8],"./ModalPhoto/":[20,9,8],"./ModalPhoto/Portal":[22,9,0],"./ModalPhoto/Portal/":[22,9,0],"./ModalPhoto/Portal/index":[22,9,0],"./ModalPhoto/Portal/index.tsx":[22,9,0],"./ModalPhoto/index":[20,9,8],"./ModalPhoto/index.tsx":[20,9,8],"./ModalPhoto/styles.module.scss":[75,7,16],"./Photo":[21,9,5],"./Photo/":[21,9,5],"./Photo/index":[21,9,5],"./Photo/index.tsx":[21,9,5],"./Photo/styles.module.scss":[76,7,17],"./Photos":[29,9,2],"./Photos/":[29,9,2],"./Photos/SearchResults":[26,9,3],"./Photos/SearchResults/":[26,9,3],"./Photos/SearchResults/index":[26,9,3],"./Photos/SearchResults/index.tsx":[26,9,3],"./Photos/SearchResults/styles.module.scss":[80,7,18],"./Photos/Sentinel":[27,9,9],"./Photos/Sentinel/":[27,9,9],"./Photos/Sentinel/index":[27,9,9],"./Photos/Sentinel/index.tsx":[27,9,9],"./Photos/Sentinel/styles.module.scss":[81,7,19],"./Photos/index":[29,9,2],"./Photos/index.tsx":[29,9,2],"./Photos/styles.module.scss":[82,7,20],"./PhotosByAlbums":[23,9,4],"./PhotosByAlbums/":[23,9,4],"./PhotosByAlbums/index":[23,9,4],"./PhotosByAlbums/index.tsx":[23,9,4],"./PhotosByAlbums/styles.module.scss":[77,7,21],"./Tabs":[7,9],"./Tabs/":[7,9],"./Tabs/index":[7,9],"./Tabs/index.tsx":[7,9],"./Tabs/styles.module.scss":[19,7]};function r(e){if(!n.o(o,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],r=t[0];return Promise.all(t.slice(2).map(n.e)).then((function(){return n.t(r,t[1])}))}r.keys=function(){return Object.keys(o)},r.id=56,e.exports=r},6:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(16),s=n(18),i=n(12),c=n.n(i);t.default=Object(a.a)((function(e){var t=e.component,n=e.showSearch;return r.a.createElement("header",{className:c.a.Header},r.a.createElement("h1",null,"Luxoft Gallery"),n?r.a.createElement("span",{className:c.a.search},r.a.createElement("svg",{width:"24px",height:"24px",className:c.a["lens-icon"],viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M20.49 19l-5.73-5.73C15.53 12.2 16 10.91 16 9.5A6.5 6.5 0 1 0 9.5 16c1.41 0 2.7-.47 3.77-1.24L19 20.49 20.49 19zM5 9.5C5 7.01 7.01 5 9.5 5S14 7.01 14 9.5 11.99 14 9.5 14 5 11.99 5 9.5z"})),r.a.createElement("input",{type:"text",placeholder:'Search "Luxoft". Be careful if you pay for data transfer! Search`ll synchronize your device with external storage.',onChange:s.a.takeLatest})):r.a.createElement("span",{className:c.a.title},t))}))},7:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(8),s=n(19),i=n.n(s);t.default=function(e){var t=e.tabs;return r.a.createElement("nav",null,r.a.createElement("ul",{className:i.a.Tabs},!!t.length&&t.map((function(e,t){var n=e.id,o=e.title,s=e.icon,c=e.setActive,l=e.amIActive;return r.a.createElement("li",{key:n},r.a.createElement("button",{className:"".concat(l()?i.a.active:""),onClick:c},r.a.createElement(a.default,{svg:s}),o))}))))}},74:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(13),s=n.n(a),i=n(10),c=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function l(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(r.a.createElement(i.default,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/luxgallery",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/luxgallery","/service-worker.js");c?(!function(e,t){fetch(e).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):l(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):l(t,e)}))}}()},8:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o);t.default=function(e){var t=e.svg;return r.a.createElement("i",{dangerouslySetInnerHTML:{__html:t}})}},9:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(32),s=n.n(a);t.default=function(e){var t=e.children;return r.a.createElement("main",{className:s.a.Main},t)}}},[[49,11,12]]]);
//# sourceMappingURL=main.dbe84916.chunk.js.map